/*!                                                              
 * LeapJS v1.0.1                                                  
 * http://github.com/leapmotion/leapjs/                                        
 *                                                                             
 * Copyright 2020 Ultraleap, Inc. and other contributors                       
 * Released under the Apache-2.0 license                                       
 * http://github.com/leapmotion/leapjs/blob/master/LICENSE                     
 */
!function i(a,s,u){function c(e,t){if(!s[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(h)return h(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[e]={exports:{}};a[e][0].call(o.exports,function(t){return c(a[e][1][t]||t)},o,o.exports,i,a,s,u)}return s[e].exports}for(var h="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,n){t("./pointable");var r=t("gl-matrix"),o=r.vec3,i=r.mat3,a=r.mat4,s=e.exports=function(t,e){this.finger=t,this._center=null,this._matrix=null,this.type=e.type,this.prevJoint=e.prevJoint,this.nextJoint=e.nextJoint,this.width=e.width;var n=new Array(3);o.sub(n,e.nextJoint,e.prevJoint),this.length=o.length(n),this.basis=e.basis};s.prototype.left=function(){return this._left||(this._left=i.determinant(this.basis[0].concat(this.basis[1]).concat(this.basis[2]))<0),this._left},s.prototype.matrix=function(){if(this._matrix)return this._matrix;var t=this.basis,e=this._matrix=a.create();return e[0]=t[0][0],e[1]=t[0][1],e[2]=t[0][2],e[4]=t[1][0],e[5]=t[1][1],e[6]=t[1][2],e[8]=t[2][0],e[9]=t[2][1],e[10]=t[2][2],e[3]=this.center()[0],e[7]=this.center()[1],e[11]=this.center()[2],this.left()&&(e[0]*=-1,e[1]*=-1,e[2]*=-1),this._matrix},s.prototype.lerp=function(t,e){o.lerp(t,this.prevJoint,this.nextJoint,e)},s.prototype.center=function(){if(this._center)return this._center;var t=o.create();return this.lerp(t,.5),this._center=t},s.prototype.direction=function(){return[-1*this.basis[2][0],-1*this.basis[2][1],-1*this.basis[2][2]]}},{"./pointable":14,"gl-matrix":22}],2:[function(t,e,n){var r=e.exports=function(t){this.pos=0,this._buf=[],this.size=t};r.prototype.get=function(t){if(null==t&&(t=0),!(t>=this.size||t>=this._buf.length))return this._buf[(this.pos-t-1)%this.size]},r.prototype.push=function(t){return this._buf[this.pos%this.size]=t,this.pos++}},{}],3:[function(t,e,n){var r=t("../protocol").chooseProtocol,o=t("events").EventEmitter,i=e.exports=function(t){this.opts=Object.assign({host:"127.0.0.1",scheme:this.getScheme(),port:this.getPort(),background:!1,optimizeHMD:!1,requestProtocolVersion:i.defaultProtocolVersion},t||{}),this.host=this.opts.host,this.port=this.opts.port,this.scheme=this.opts.scheme,this.protocolVersionVerified=!1,this.background=null,this.optimizeHMD=null,this.on("ready",function(){this.setBackground(this.opts.background),this.setOptimizeHMD(this.opts.optimizeHMD),this.opts.optimizeHMD?console.log("Optimized for head mounted display usage."):console.log("Optimized for desktop usage.")})};i.defaultProtocolVersion=6,i.prototype.getUrl=function(){return this.scheme+"//"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"},i.prototype.getScheme=function(){return"ws:"},i.prototype.getPort=function(){return 6437},i.prototype.setBackground=function(t){this.opts.background=t,this.protocol&&this.protocol.sendBackground&&this.background!==this.opts.background&&(this.background=this.opts.background,this.protocol.sendBackground(this,this.opts.background))},i.prototype.setOptimizeHMD=function(t){this.opts.optimizeHMD=t,this.protocol&&this.protocol.sendOptimizeHMD&&this.optimizeHMD!==this.opts.optimizeHMD&&(this.optimizeHMD=this.opts.optimizeHMD,this.protocol.sendOptimizeHMD(this,this.opts.optimizeHMD))},i.prototype.handleOpen=function(){this.connected||(this.connected=!0,this.emit("connect"))},i.prototype.handleClose=function(t,e){this.connected&&(this.disconnect(),1001===t&&1<this.opts.requestProtocolVersion&&(this.protocolVersionVerified?this.protocolVersionVerified=!1:this.opts.requestProtocolVersion--),this.startReconnection())},i.prototype.startReconnection=function(){var t=this;this.reconnectionTimer||(this.reconnectionTimer=setInterval(function(){t.reconnect()},500))},i.prototype.stopReconnection=function(){this.reconnectionTimer=clearInterval(this.reconnectionTimer)},i.prototype.disconnect=function(t){if(t||this.stopReconnection(),this.socket)return this.socket.close(),delete this.socket,delete this.protocol,delete this.background,delete this.optimizeHMD,delete this.focusedState,this.connected&&(this.connected=!1,this.emit("disconnect")),!0},i.prototype.reconnect=function(){this.connected?this.stopReconnection():(this.disconnect(!0),this.connect())},i.prototype.handleData=function(t){var e,n=JSON.parse(t);void 0===this.protocol?(e=this.protocol=r(n),this.protocolVersionVerified=!0,this.emit("ready")):e=this.protocol(n),this.emit(e.type,e)},i.prototype.connect=function(){if(!this.socket)return this.socket=this.setupSocket(),!0},i.prototype.send=function(t){this.socket.send(t)},i.prototype.reportFocus=function(t){this.connected&&this.focusedState!==t&&(this.focusedState=t,this.emit(this.focusedState?"focus":"blur"),this.protocol&&this.protocol.sendFocused&&this.protocol.sendFocused(this,this.focusedState))},Object.assign(i.prototype,o.prototype)},{"../protocol":15,events:20}],4:[function(t,e,n){var r=e.exports=t("./base"),o=e.exports=function(t){r.call(this,t);var e=this;this.on("ready",function(){e.startFocusLoop()}),this.on("disconnect",function(){e.stopFocusLoop()})};Object.assign(o.prototype,r.prototype),o.__proto__=r,o.prototype.useSecure=function(){return"https:"===location.protocol},o.prototype.getScheme=function(){return this.useSecure()?"wss:":"ws:"},o.prototype.getPort=function(){return this.useSecure()?6436:6437},o.prototype.setupSocket=function(){var e=this,t=new WebSocket(this.getUrl());return t.onopen=function(){e.handleOpen()},t.onclose=function(t){e.handleClose(t.code,t.reason)},t.onmessage=function(t){e.handleData(t.data)},t.onerror=function(t){e.useSecure()&&"wss:"===e.scheme&&(e.scheme="ws:",e.port=6437,e.disconnect(),e.connect())},t},o.prototype.startFocusLoop=function(){if(!this.focusDetectorTimer){var e=this,n=null;n=void 0!==document.hidden?"hidden":void 0!==document.mozHidden?"mozHidden":void 0!==document.msHidden?"msHidden":void 0!==document.webkitHidden?"webkitHidden":void 0,void 0===e.windowVisible&&(e.windowVisible=void 0===n||!1===document[n]);var t=window.addEventListener("focus",function(t){e.windowVisible=!0,o()}),r=window.addEventListener("blur",function(t){e.windowVisible=!1,o()});this.on("disconnect",function(){window.removeEventListener("focus",t),window.removeEventListener("blur",r)});var o=function(){var t=void 0===n||!1===document[n];e.reportFocus(t&&e.windowVisible)};o(),this.focusDetectorTimer=setInterval(o,100)}},o.prototype.stopFocusLoop=function(){this.focusDetectorTimer&&(clearTimeout(this.focusDetectorTimer),delete this.focusDetectorTimer)}},{"./base":3}],5:[function(t,e,n){var r=t("ws"),o=t("./base"),i=e.exports=function(t){o.call(this,t);var e=this;this.on("ready",function(){e.reportFocus(!0)})};Object.assign(i.prototype,o.prototype),i.__proto__=o,i.prototype.setupSocket=function(){var n=this,t=new r(this.getUrl());return t.on("open",function(){n.handleOpen()}),t.on("message",function(t){n.handleData(t)}),t.on("close",function(t,e){n.handleClose(t,e)}),t.on("error",function(){n.startReconnection()}),t}},{"./base":3,ws:33}],6:[function(d,e,t){(function(r){var o=d("./frame"),i=d("./hand"),a=d("./pointable"),s=d("./finger"),u=d("./circular_buffer"),c=d("./pipeline"),t=d("events").EventEmitter,h=d("./dialog"),l=e.exports=function(t){var e=void 0!==r&&r.versions&&r.versions.node,n=this;this.inNode=e,t=Object.assign({inNode:this.inNode,frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!this.useAnimationLoop(),loopWhileDisconnected:!0,useAllPlugins:!1,checkVersion:!0},t||{}),this.animationFrameRequested=!1,this.onAnimationFrame=function(t){n.lastConnectionFrame.valid&&n.emit("animationFrame",n.lastConnectionFrame),n.emit("frameEnd",t),n.loopWhileDisconnected&&(!1!==n.connection.focusedState||n.connection.opts.background)?window.requestAnimationFrame(n.onAnimationFrame):n.animationFrameRequested=!1},this.suppressAnimationLoop=t.suppressAnimationLoop,this.loopWhileDisconnected=t.loopWhileDisconnected,this.frameEventName=t.frameEventName,this.useAllPlugins=t.useAllPlugins,this.history=new u(200),this.lastFrame=o.Invalid,this.lastValidFrame=o.Invalid,this.lastConnectionFrame=o.Invalid,this.checkVersion=t.checkVersion,void 0===t.connectionType?this.connectionType=this.inBrowser()?d("./connection/browser"):d("./connection/node"):this.connectionType=t.connectionType,this.connection=new this.connectionType(t),this.streamingCount=0,this.devices={},this.plugins={},this._pluginPipelineSteps={},this._pluginExtendedMethods={},t.useAllPlugins&&this.useRegisteredPlugins(),this.setupFrameEvents(t),this.setupConnectionEvents(),this.startAnimationLoop()};l.prototype.setBackground=function(t){return this.connection.setBackground(t),this},l.prototype.setOptimizeHMD=function(t){return this.connection.setOptimizeHMD(t),this},l.prototype.inBrowser=function(){return!this.inNode},l.prototype.useAnimationLoop=function(){return this.inBrowser()&&!this.inBackgroundPage()},l.prototype.inBackgroundPage=function(){return"undefined"!=typeof chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&chrome.extension.getBackgroundPage()===window},l.prototype.connect=function(){return this.connection.connect(),this},l.prototype.streaming=function(){return 0<this.streamingCount},l.prototype.connected=function(){return!!this.connection.connected},l.prototype.startAnimationLoop=function(){this.suppressAnimationLoop||this.animationFrameRequested||(this.animationFrameRequested=!0,window.requestAnimationFrame(this.onAnimationFrame))},l.prototype.disconnect=function(){return this.connection.disconnect(),this},l.prototype.frame=function(t){return this.history.get(t)||o.Invalid},l.prototype.loop=function(t){return t&&("function"==typeof t?this.on(this.frameEventName,t):this.setupFrameEvents(t)),this.connect()},l.prototype.addStep=function(t){this.pipeline||(this.pipeline=new c(this)),this.pipeline.addStep(t)},l.prototype.processFrame=function(t){this.lastConnectionFrame=t,this.startAnimationLoop(),this.emit("deviceFrame",t)},l.prototype.processFinishedFrame=function(t){(this.lastFrame=t).valid&&(this.lastValidFrame=t),t.controller=this,t.historyIdx=this.history.push(t),this.pipeline&&(t=(t=this.pipeline.run(t))||o.Invalid),this.emit("frame",t),this.emitHandEvents(t)},l.prototype.emitHandEvents=function(t){for(var e=0;e<t.hands.length;e++)this.emit("hand",t.hands[e])},l.prototype.setupFrameEvents=function(t){t.frame&&this.on("frame",t.frame),t.hand&&this.on("hand",t.hand)},l.prototype.setupConnectionEvents=function(){var i=this;this.connection.on("frame",function(t){i.processFrame(t)}),this.on(this.frameEventName,function(t){i.processFinishedFrame(t)});function e(){if(0<i.streamingCount){for(var t in i.devices)i.emit("deviceStopped",i.devices[t]),i.emit("deviceRemoved",i.devices[t]);for(var t in i.emit("streamingStopped",i.devices[t]),i.streamingCount=0,i.devices)delete i.devices[t]}}var n=function(){if(i.connection.opts.requestProtocolVersion<5&&0==i.streamingCount){i.streamingCount=1;var t={attached:!0,streaming:!0,type:"unknown",id:"Lx00000000000"};i.devices[t.id]=t,i.emit("deviceAttached",t),i.emit("deviceStreaming",t),i.emit("streamingStarted",t),i.connection.removeListener("frame",n)}};this.connection.on("focus",function(){i.loopWhileDisconnected&&i.startAnimationLoop(),i.emit("focus")}),this.connection.on("blur",function(){i.emit("blur")}),this.connection.on("protocol",function(t){t.on("beforeFrameCreated",function(t){i.emit("beforeFrameCreated",t)}),t.on("afterFrameCreated",function(t,e){i.emit("afterFrameCreated",t,e)}),i.emit("protocol",t)}),this.connection.on("ready",function(){i.checkVersion&&!i.inNode&&i.checkOutOfDate(),i.emit("ready")}),this.connection.on("connect",function(){i.emit("connect"),i.connection.removeListener("frame",n),i.connection.on("frame",n)}),this.connection.on("disconnect",function(){i.emit("disconnect"),e()}),this.connection.on("deviceConnect",function(t){t.state?(i.emit("deviceConnected"),i.connection.removeListener("frame",n),i.connection.on("frame",n)):(i.emit("deviceDisconnected"),e())}),this.connection.on("deviceEvent",function(t){var e=t.state,n=i.devices[e.id],r={};for(var o in e)n&&n.hasOwnProperty(o)&&n[o]==e[o]||(r[o]=!0);i.devices[e.id]=e,r.attached&&i.emit(e.attached?"deviceAttached":"deviceRemoved",e),r.streaming&&(e.streaming?(i.streamingCount++,i.emit("deviceStreaming",e),1==i.streamingCount&&i.emit("streamingStarted",e),r.attached||i.emit("deviceConnected")):r.attached&&e.attached||(i.streamingCount--,i.emit("deviceStopped",e),0==i.streamingCount&&i.emit("streamingStopped",e),i.emit("deviceDisconnected")))}),this.on("newListener",function(t,e){"deviceConnected"!=t&&"deviceDisconnected"!=t||console.warn(t+" events are deprecated.  Consider using 'streamingStarted/streamingStopped' or 'deviceStreaming/deviceStopped' instead")})},l.prototype.checkOutOfDate=function(){console.assert(this.connection&&this.connection.protocol);var t=this.connection.protocol.serviceVersion,e=this.connection.protocol.version,n=this.connectionType.defaultProtocolVersion;return e<n&&(console.warn("Your Protocol Version is v"+e+", this app was designed for v"+n),h.warnOutOfDate({sV:t,pV:e}),!0)},l._pluginFactories={},l.plugin=function(t,e){return this._pluginFactories[t]&&console.warn('Plugin "'+t+'" already registered'),this._pluginFactories[t]=e},l.plugins=function(){return Object.keys(this._pluginFactories)};function f(t,e,n){-1!=["beforeFrameCreated","afterFrameCreated"].indexOf(e)?this.on(e,n):(this.pipeline||(this.pipeline=new c(this)),this._pluginPipelineSteps[t]||(this._pluginPipelineSteps[t]=[]),this._pluginPipelineSteps[t].push(this.pipeline.addWrappedStep(e,n)))}function p(t,e,n){var r;switch(this._pluginExtendedMethods[t]||(this._pluginExtendedMethods[t]=[]),e){case"frame":r=o;break;case"hand":r=i;break;case"pointable":r=a,Object.assign(s.prototype,n),Object.assign(s.Invalid,n);break;case"finger":r=s;break;default:throw t+' specifies invalid object type "'+e+'" for prototypical extension'}Object.assign(r.prototype,n),Object.assign(r.Invalid,n),this._pluginExtendedMethods[t].push([r,n])}l.prototype.use=function(t,e){var n,r,o,i;if(!(r="function"==typeof t?t:l._pluginFactories[t]))throw"Leap Plugin "+t+" not found.";if(e=e||{},this.plugins[t])return Object.assign(this.plugins[t],e),this;for(o in this.plugins[t]=e,i=r.call(this,e))"function"==typeof(n=i[o])?f.call(this,t,o,n):p.call(this,t,o,n);return this},l.prototype.stopUsing=function(t){var e,n=this._pluginPipelineSteps[t],r=this._pluginExtendedMethods[t],o=0;if(this.plugins[t]){if(n)for(o=0;o<n.length;o++)this.pipeline.removeStep(n[o]);if(r)for(o=0;o<r.length;o++)for(var i in e=r[o][0],r[o][1])delete e.prototype[i],delete e.Invalid[i];return delete this.plugins[t],this}},l.prototype.useRegisteredPlugins=function(){for(var t in l._pluginFactories)this.use(t)},Object.assign(l.prototype,t.prototype)}).call(this,d("_process"))},{"./circular_buffer":2,"./connection/browser":4,"./connection/node":5,"./dialog":7,"./finger":8,"./frame":9,"./hand":10,"./pipeline":13,"./pointable":14,_process:32,events:20}],7:[function(t,e,n){(function(t){var o=e.exports=function(t,e){this.options=e||{},this.message=t,this.createElement()};o.prototype.createElement=function(){this.element=document.createElement("div"),this.element.className="leapjs-dialog",this.element.style.position="fixed",this.element.style.top="8px",this.element.style.left=0,this.element.style.right=0,this.element.style.textAlign="center",this.element.style.zIndex=1e3;var t=document.createElement("div");this.element.appendChild(t),t.style.className="leapjs-dialog",t.style.display="inline-block",t.style.margin="auto",t.style.padding="8px",t.style.color="#222",t.style.background="#eee",t.style.borderRadius="4px",t.style.border="1px solid #999",t.style.textAlign="left",t.style.cursor="pointer",t.style.whiteSpace="nowrap",t.style.transition="box-shadow 1s linear",t.innerHTML=this.message,this.options.onclick&&t.addEventListener("click",this.options.onclick),this.options.onmouseover&&t.addEventListener("mouseover",this.options.onmouseover),this.options.onmouseout&&t.addEventListener("mouseout",this.options.onmouseout),this.options.onmousemove&&t.addEventListener("mousemove",this.options.onmousemove)},o.prototype.show=function(){return document.body.appendChild(this.element),this},o.prototype.hide=function(){return document.body.removeChild(this.element),this},o.warnOutOfDate=function(t){t=t||{};var n="http://developer.leapmotion.com?";for(var e in t.returnTo=window.location.href,t)n+=e+"="+encodeURIComponent(t[e])+"&";var r;return(r=new o("This site requires Leap Motion Tracking V2.<button id='leapjs-accept-upgrade'  style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 16px;'>Upgrade</button><button id='leapjs-decline-upgrade' style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 8px; '>Not Now</button>",{onclick:function(t){if("leapjs-decline-upgrade"!=t.target.id){var e=window.open(n,"_blank","height=800,width=1000,location=1,menubar=1,resizable=1,status=1,toolbar=1,scrollbars=1");window.focus&&e.focus()}return r.hide(),!0},onmousemove:function(t){t.target==document.getElementById("leapjs-decline-upgrade")?(document.getElementById("leapjs-decline-upgrade").style.color="#000",document.getElementById("leapjs-decline-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"):(document.getElementById("leapjs-accept-upgrade").style.color="#000",document.getElementById("leapjs-accept-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none")},onmouseout:function(){document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"}})).show()},o.hasWarnedBones=!1,o.warnBones=function(){this.hasWarnedBones||(this.hasWarnedBones=!0,console.warn("Your Leap Service is out of date"),void 0!==t&&t.versions&&t.versions.node||this.warnOutOfDate({reason:"bones"}))}}).call(this,t("_process"))},{_process:32}],8:[function(t,e,n){var r=t("./pointable"),o=t("./bone"),i=t("./dialog"),a=e.exports=function(t){r.call(this,t),this.dipPosition=t.dipPosition,this.pipPosition=t.pipPosition,this.mcpPosition=t.mcpPosition,this.carpPosition=t.carpPosition,this.extended=t.extended,this.type=t.type,this.finger=!0,this.positions=[this.carpPosition,this.mcpPosition,this.pipPosition,this.dipPosition,this.tipPosition],t.bases?this.addBones(t):i.warnBones()};Object.assign(a.prototype,r.prototype),a.prototype.addBones=function(t){this.metacarpal=new o(this,{type:0,width:this.width,prevJoint:this.carpPosition,nextJoint:this.mcpPosition,basis:t.bases[0]}),this.proximal=new o(this,{type:1,width:this.width,prevJoint:this.mcpPosition,nextJoint:this.pipPosition,basis:t.bases[1]}),this.medial=new o(this,{type:2,width:this.width,prevJoint:this.pipPosition,nextJoint:this.dipPosition,basis:t.bases[2]}),this.distal=new o(this,{type:3,width:this.width,prevJoint:this.dipPosition,nextJoint:t.btipPosition,basis:t.bases[3]}),this.bones=[this.metacarpal,this.proximal,this.medial,this.distal]},a.prototype.toString=function(){return"Finger [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},a.Invalid={valid:!1}},{"./bone":1,"./dialog":7,"./pointable":14}],9:[function(t,e,n){var c=t("./hand"),h=t("./pointable"),r=t("gl-matrix"),o=r.mat3,a=r.vec3,i=t("./interaction_box"),l=t("./finger"),s=e.exports=function(t){this.valid=!0,this.id=t.id,this.timestamp=t.timestamp,this.hands=[],this.handsMap={},this.pointables=[],this.fingers=[],t.interactionBox&&(this.interactionBox=new i(t.interactionBox)),this.pointablesMap={},this._translation=t.t,this._rotation=function n(t){return Array.isArray(t)?t.reduce(function(t,e){return t.concat(n(e))},[]):[t]}(t.r),this._scaleFactor=t.s,this.data=t,this.type="frame",this.currentFrameRate=t.currentFrameRate,this.postprocessData(t)};s.prototype.postprocessData=function(t){for(var e=0,n=(t=t||this.data).hands.length;e!=n;e++){var r=new c(t.hands[e]);(r.frame=this).hands.push(r),this.handsMap[r.id]=r}var o;t.pointables.sort((o="id",function(t,e){return t[o]>e[o]?1:e[o]>t[o]?-1:0}));for(var i=0,a=t.pointables.length;i!=a;i++){var s=t.pointables[i],u=s.dipPosition?new l(s):new h(s);(u.frame=this).addPointable(u)}},s.prototype.addPointable=function(t){if(this.pointables.push(t),this.pointablesMap[t.id]=t,this.fingers.push(t),void 0!==t.handId&&this.handsMap.hasOwnProperty(t.handId)){var e=this.handsMap[t.handId];switch(e.pointables.push(t),e.fingers.push(t),t.type){case 0:e.thumb=t;break;case 1:e.indexFinger=t;break;case 2:e.middleFinger=t;break;case 3:e.ringFinger=t;break;case 4:e.pinky=t}}},s.prototype.pointable=function(t){return this.pointablesMap[t]||h.Invalid},s.prototype.finger=function(t){return this.pointable(t)},s.prototype.hand=function(t){return this.handsMap[t]||c.Invalid},s.prototype.rotationAngle=function(t,e){if(!this.valid||!t.valid)return 0;var n=this.rotationMatrix(t),r=.5*(n[0]+n[4]+n[8]-1),o=Math.acos(r);if(o=isNaN(o)?0:o,void 0!==e){var i=this.rotationAxis(t);o*=a.dot(i,a.normalize(a.create(),e))}return o},s.prototype.rotationAxis=function(t){return this.valid&&t.valid?a.normalize(a.create(),[this._rotation[7]-t._rotation[5],this._rotation[2]-t._rotation[6],this._rotation[3]-t._rotation[1]]):a.create()},s.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return o.create();var e=o.transpose(o.create(),this._rotation);return o.multiply(o.create(),t._rotation,e)},s.prototype.scaleFactor=function(t){return this.valid&&t.valid?Math.exp(this._scaleFactor-t._scaleFactor):1},s.prototype.translation=function(t){return this.valid&&t.valid?a.subtract(a.create(),this._translation,t._translation):a.create()},s.prototype.toString=function(){var t="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";return t+=" ]"},s.prototype.dump=function(){var t="";t+="Frame Info:<br/>",t+=this.toString(),t+="<br/><br/>Hands:<br/>";for(var e=0,n=this.hands.length;e!=n;e++)t+="  "+this.hands[e].toString()+"<br/>";t+="<br/><br/>Pointables:<br/>";for(var r=0,o=this.pointables.length;r!=o;r++)t+="  "+this.pointables[r].toString()+"<br/>";return t+="<br/><br/>Raw JSON:<br/>",t+=JSON.stringify(this.data)},s.Invalid={valid:!1,hands:[],fingers:[],pointables:[],pointable:function(){return h.Invalid},finger:function(){return h.Invalid},hand:function(){return c.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return o.create()},rotationAxis:function(){return a.create()},scaleFactor:function(){return 1},translation:function(){return a.create()}}},{"./finger":8,"./hand":10,"./interaction_box":12,"./pointable":14,"gl-matrix":22}],10:[function(t,e,n){var r=t("./pointable"),o=t("./bone"),i=t("gl-matrix"),a=i.mat3,s=i.vec3,u=e.exports=function(t){this.id=t.id,this.palmPosition=t.palmPosition,this.direction=t.direction,this.palmVelocity=t.palmVelocity,this.palmNormal=t.palmNormal,this.sphereCenter=t.sphereCenter,this.sphereRadius=t.sphereRadius,this.valid=!0,this.pointables=[],this.fingers=[],t.armBasis?this.arm=new o(this,{type:4,width:t.armWidth,prevJoint:t.elbow,nextJoint:t.wrist,basis:t.armBasis}):this.arm=null,this._translation=t.t,this._rotation=function n(t){return Array.isArray(t)?t.reduce(function(t,e){return t.concat(n(e))},[]):[t]}(t.r),this._scaleFactor=t.s,this.timeVisible=t.timeVisible,this.stabilizedPalmPosition=t.stabilizedPalmPosition,this.type=t.type,this.grabStrength=t.grabStrength,this.pinchStrength=t.pinchStrength,this.confidence=t.confidence};u.prototype.finger=function(t){var e=this.frame.finger(t);return e&&e.handId==this.id?e:r.Invalid},u.prototype.rotationAngle=function(t,e){if(!this.valid||!t.valid)return 0;if(!t.hand(this.id).valid)return 0;var n=this.rotationMatrix(t),r=.5*(n[0]+n[4]+n[8]-1),o=Math.acos(r);if(o=isNaN(o)?0:o,void 0!==e){var i=this.rotationAxis(t);o*=s.dot(i,s.normalize(s.create(),e))}return o},u.prototype.rotationAxis=function(t){if(!this.valid||!t.valid)return s.create();var e=t.hand(this.id);return e.valid?s.normalize(s.create(),[this._rotation[7]-e._rotation[5],this._rotation[2]-e._rotation[6],this._rotation[3]-e._rotation[1]]):s.create()},u.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return a.create();var e=t.hand(this.id);if(!e.valid)return a.create();var n=a.transpose(a.create(),this._rotation);return a.multiply(a.create(),e._rotation,n)},u.prototype.scaleFactor=function(t){if(!this.valid||!t.valid)return 1;var e=t.hand(this.id);return e.valid?Math.exp(this._scaleFactor-e._scaleFactor):1},u.prototype.translation=function(t){if(!this.valid||!t.valid)return s.create();var e=t.hand(this.id);return e.valid?[this._translation[0]-e._translation[0],this._translation[1]-e._translation[1],this._translation[2]-e._translation[2]]:s.create()},u.prototype.toString=function(){return"Hand ("+this.type+") [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "},u.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])},u.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])},u.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])},u.Invalid={valid:!1,fingers:[],pointables:[],left:!1,pointable:function(){return r.Invalid},finger:function(){return r.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return a.create()},rotationAxis:function(){return s.create()},scaleFactor:function(){return 1},translation:function(){return s.create()}}},{"./bone":1,"./pointable":14,"gl-matrix":22}],11:[function(t,e,n){e.exports={Controller:t("./controller"),Frame:t("./frame"),Hand:t("./hand"),Pointable:t("./pointable"),Finger:t("./finger"),InteractionBox:t("./interaction_box"),CircularBuffer:t("./circular_buffer"),UI:t("./ui"),JSONProtocol:t("./protocol").JSONProtocol,glMatrix:t("gl-matrix"),mat3:t("gl-matrix").mat3,vec3:t("gl-matrix").vec3,loopController:void 0,version:t("./version.js"),EventEmitter:t("events").EventEmitter,loop:function(t,e){return t&&void 0===e&&"[object Function]"==={}.toString.call(t)&&(e=t,t={}),this.loopController?t&&this.loopController.setupFrameEvents(t):this.loopController=new this.Controller(t),this.loopController.loop(e),this.loopController},plugin:function(t,e){this.Controller.plugin(t,e)}}},{"./circular_buffer":2,"./controller":6,"./finger":8,"./frame":9,"./hand":10,"./interaction_box":12,"./pointable":14,"./protocol":15,"./ui":16,"./version.js":19,events:20,"gl-matrix":22}],12:[function(t,e,n){var r=t("gl-matrix").vec3,o=e.exports=function(t){this.valid=!0,this.center=t.center,this.size=t.size,this.width=t.size[0],this.height=t.size[1],this.depth=t.size[2]};o.prototype.denormalizePoint=function(t){return r.fromValues((t[0]-.5)*this.size[0]+this.center[0],(t[1]-.5)*this.size[1]+this.center[1],(t[2]-.5)*this.size[2]+this.center[2])},o.prototype.normalizePoint=function(t,e){var n=r.fromValues((t[0]-this.center[0])/this.size[0]+.5,(t[1]-this.center[1])/this.size[1]+.5,(t[2]-this.center[2])/this.size[2]+.5);return e&&(n[0]=Math.min(Math.max(n[0],0),1),n[1]=Math.min(Math.max(n[1],0),1),n[2]=Math.min(Math.max(n[2],0),1)),n},o.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"},o.Invalid={valid:!1}},{"gl-matrix":22}],13:[function(t,e,n){var r=e.exports=function(t){this.steps=[],this.controller=t};r.prototype.addStep=function(t){this.steps.push(t)},r.prototype.run=function(t){for(var e=this.steps.length,n=0;n!=e&&t;n++)t=this.steps[n](t);return t},r.prototype.removeStep=function(t){var e=this.steps.indexOf(t);if(-1===e)throw"Step not found in pipeline";this.steps.splice(e,1)},r.prototype.addWrappedStep=function(o,i){function t(t){var e,n,r;for(n=0,r=(e="frame"==o?[t]:t[o+"s"]||[]).length;n<r;n++)i.call(a,e[n]);return t}var a=this.controller;return this.addStep(t),t}},{}],14:[function(t,e,n){t("gl-matrix").vec3;var r=e.exports=function(t){this.valid=!0,this.id=t.id,this.handId=t.handId,this.length=t.length,this.tool=t.tool,this.width=t.width,this.direction=t.direction,this.stabilizedTipPosition=t.stabilizedTipPosition,this.tipPosition=t.tipPosition,this.tipVelocity=t.tipVelocity,this.touchZone=t.touchZone,this.touchDistance=t.touchDistance,this.timeVisible=t.timeVisible};r.prototype.toString=function(){return"Pointable [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},r.prototype.hand=function(){return this.frame.hand(this.handId)},r.Invalid={valid:!1}},{"gl-matrix":22}],15:[function(t,e,n){function r(t){this.type=t.type,this.state=t.state}var o=t("./frame"),i=t("events").EventEmitter;n.chooseProtocol=function(t){var n;switch(t.version){case 1:case 2:case 3:case 4:case 5:case 6:(n=a(t)).sendBackground=function(t,e){t.send(n.encode({background:e}))},n.sendFocused=function(t,e){t.send(n.encode({focused:e}))},n.sendOptimizeHMD=function(t,e){t.send(n.encode({optimizeHMD:e}))};break;default:throw"unrecognized version"}return n};var a=n.JSONProtocol=function(t){var n=function(t){if(t.event)return new r(t.event);n.emit("beforeFrameCreated",t);var e=new o(t);return n.emit("afterFrameCreated",e,t),e};return n.encode=function(t){return JSON.stringify(t)},n.version=t.version,n.serviceVersion=t.serviceVersion,n.versionLong="Version "+t.version,n.type="protocol",Object.assign(n,i.prototype),n}},{"./frame":9,events:20}],16:[function(t,e,n){n.UI={Region:t("./ui/region"),Cursor:t("./ui/cursor")}},{"./ui/cursor":17,"./ui/region":18}],17:[function(t,e,n){e.exports=function(){return function(t){var e=t.pointables.sort(function(t,e){return t.z-e.z})[0];return e&&e.valid&&(t.cursorPosition=e.tipPosition),t}}},{}],18:[function(t,e,n){var r=t("events").EventEmitter,o=e.exports=function(t,e){this.start=new Vector(t),this.end=new Vector(e),this.enteredFrame=null};o.prototype.hasPointables=function(t){for(var e=0;e!=t.pointables.length;e++){var n=t.pointables[e].tipPosition;if(n.x>=this.start.x&&n.x<=this.end.x&&n.y>=this.start.y&&n.y<=this.end.y&&n.z>=this.start.z&&n.z<=this.end.z)return!0}return!1},o.prototype.listener=function(t){var e=this;return t&&t.nearThreshold&&this.setupNearRegion(t.nearThreshold),function(t){return e.updatePosition(t)}},o.prototype.clipper=function(){var e=this;return function(t){return e.updatePosition(t),e.enteredFrame?t:null}},o.prototype.setupNearRegion=function(t){var e=this.nearRegion=new o([this.start.x-t,this.start.y-t,this.start.z-t],[this.end.x+t,this.end.y+t,this.end.z+t]),n=this;e.on("enter",function(t){n.emit("near",t)}),e.on("exit",function(t){n.emit("far",t)}),n.on("exit",function(t){n.emit("near",t)})},o.prototype.updatePosition=function(t){return this.nearRegion&&this.nearRegion.updatePosition(t),this.hasPointables(t)&&null==this.enteredFrame?(this.enteredFrame=t,this.emit("enter",this.enteredFrame)):this.hasPointables(t)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame)),t},o.prototype.normalize=function(t){return new Vector([(t.x-this.start.x)/(this.end.x-this.start.x),(t.y-this.start.y)/(this.end.y-this.start.y),(t.z-this.start.z)/(this.end.z-this.start.z)])},o.prototype.mapToXY=function(t,e,n){var r=this.normalize(t),o=r.x,i=r.y;return 1<o?o=1:o<-1&&(o=-1),1<i?i=1:i<-1&&(i=-1),[(o+1)/2*e,(1-i)/2*n,r.z]},Object.assign(o.prototype,r.prototype)},{events:20}],19:[function(t,e,n){e.exports={full:"1.0.1",major:1,minor:0,dot:1}},{}],20:[function(t,e,n){var u=Object.create||function(t){function e(){}return e.prototype=t,new e},a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n},i=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=u(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((e.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var o,s=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),o=0===c.x}catch(t){o=!1}function h(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function l(t,e,n,r){var o,i,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=u(null),t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=h(t))&&0<o&&a.length>o){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else a=i[e]=n,++t._eventsCount;return t}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=i.call(f,r);return o.listener=n,r.wrapFn=o}function d(t,e,n){var r=t._events;if(!r)return[];var o=r[e];return o?"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):v(o,o.length):[]}function m(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function v(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}o?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');s=t}}):r.defaultMaxListeners=s,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return h(this)},r.prototype.emit=function(t,e,n,r){var o,i,a,s,u,c,h="error"===t;if(c=this._events)h=h&&null==c.error;else if(!h)return!1;if(h){if(1<arguments.length&&(o=e),o instanceof Error)throw o;var l=new Error('Unhandled "error" event. ('+o+")");throw l.context=o,l}if(!(i=c[t]))return!1;var f="function"==typeof i;switch(a=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var r=t.length,o=v(t,r),i=0;i<r;++i)o[i].call(n)}(i,f,this);break;case 2:!function(t,e,n,r){if(e)t.call(n,r);else for(var o=t.length,i=v(t,o),a=0;a<o;++a)i[a].call(n,r)}(i,f,this,e);break;case 3:!function(t,e,n,r,o){if(e)t.call(n,r,o);else for(var i=t.length,a=v(t,i),s=0;s<i;++s)a[s].call(n,r,o)}(i,f,this,e,n);break;case 4:!function(t,e,n,r,o,i){if(e)t.call(n,r,o,i);else for(var a=t.length,s=v(t,a),u=0;u<a;++u)s[u].call(n,r,o,i)}(i,f,this,e,n,r);break;default:for(s=new Array(a-1),u=1;u<a;u++)s[u-1]=arguments[u];!function(t,e,n,r){if(e)t.apply(n,r);else for(var o=t.length,i=v(t,o),a=0;a<o;++a)i[a].apply(n,r)}(i,f,this,s)}return!0},r.prototype.on=r.prototype.addListener=function(t,e){return l(this,t,e,!1)},r.prototype.prependListener=function(t,e){return l(this,t,e,!0)},r.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,p(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,p(this,t,e)),this},r.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=u(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),r.removeListener&&this.emit("removeListener",t,a||e)}return this},r.prototype.removeAllListeners=function(t){var e,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=u(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=u(null):delete n[t]),this;if(0===arguments.length){var o,i=a(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=u(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},r.prototype.listenerCount=m,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setMatrixArrayType=function(t){n.ARRAY_TYPE=o=t},n.toRadian=function(t){return t*a},n.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))},n.RANDOM=n.ARRAY_TYPE=n.EPSILON=void 0;var r=1e-6;n.EPSILON=r;var o="undefined"!=typeof Float32Array?Float32Array:Array;n.ARRAY_TYPE=o;var i=Math.random;n.RANDOM=i;var a=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},{}],22:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.vec4=n.vec3=n.vec2=n.quat2=n.quat=n.mat4=n.mat3=n.mat2d=n.mat2=n.glMatrix=void 0;var r=m(t("./common.js"));n.glMatrix=r;var o=m(t("./mat2.js"));n.mat2=o;var i=m(t("./mat2d.js"));n.mat2d=i;var s=m(t("./mat3.js"));n.mat3=s;var u=m(t("./mat4.js"));n.mat4=u;var c=m(t("./quat.js"));n.quat=c;var h=m(t("./quat2.js"));n.quat2=h;var l=m(t("./vec2.js"));n.vec2=l;var f=m(t("./vec3.js"));n.vec3=f;var p=m(t("./vec4.js"));function d(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return d=function(){return t},t}function m(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=d();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}n.vec4=p},{"./common.js":21,"./mat2.js":23,"./mat2d.js":24,"./mat3.js":25,"./mat4.js":26,"./quat.js":27,"./quat2.js":28,"./vec2.js":29,"./vec3.js":30,"./vec4.js":31}],23:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new h.ARRAY_TYPE(4);h.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0);return t[0]=1,t[3]=1,t},n.clone=function(t){var e=new h.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,e,n,r){var o=new h.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o},n.set=function(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t},n.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},n.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*i-o*r;return a?(a=1/a,t[0]=i*a,t[1]=-r*a,t[2]=-o*a,t[3]=n*a,t):null},n.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=r,n.rotate=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=o*u+a*s,t[2]=r*-s+i*u,t[3]=o*-s+a*u,t},n.scale=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=o*s,t[2]=i*u,t[3]=a*u,t},n.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},n.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},n.subtract=o,n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=h.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-c)<=h.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},n.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},n.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},n.sub=n.mul=void 0;var h=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],u=n[1],c=n[2],h=n[3];return t[0]=r*s+i*u,t[1]=o*s+a*u,t[2]=r*c+i*h,t[3]=o*c+a*h,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}var i=r;n.mul=i;var u=o;n.sub=u},{"./common.js":21}],24:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new d.ARRAY_TYPE(6);d.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0);return t[0]=1,t[3]=1,t},n.clone=function(t){var e=new d.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,e,n,r,o,i){var a=new d.ARRAY_TYPE(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=o,a[5]=i,a},n.set=function(t,e,n,r,o,i,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t},n.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=n*i-r*o;return u?(u=1/u,t[0]=i*u,t[1]=-r*u,t[2]=-o*u,t[3]=n*u,t[4]=(o*s-i*a)*u,t[5]=(r*a-n*s)*u,t):null},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=r,n.rotate=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(n),h=Math.cos(n);return t[0]=r*h+i*c,t[1]=o*h+a*c,t[2]=r*-c+i*h,t[3]=o*-c+a*h,t[4]=s,t[5]=u,t},n.scale=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=n[0],h=n[1];return t[0]=r*c,t[1]=o*c,t[2]=i*h,t[3]=a*h,t[4]=s,t[5]=u,t},n.translate=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=n[0],h=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=r*c+i*h+s,t[5]=o*c+a*h+u,t},n.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},n.subtract=o,n.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},n.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=e[0],c=e[1],h=e[2],l=e[3],f=e[4],p=e[5];return Math.abs(n-u)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-h)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-l)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-f)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-p)<=d.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))},n.sub=n.mul=void 0;var d=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=n[0],h=n[1],l=n[2],f=n[3],p=n[4],d=n[5];return t[0]=r*c+i*h,t[1]=o*c+a*h,t[2]=r*l+i*f,t[3]=o*l+a*f,t[4]=r*p+i*d+s,t[5]=o*p+a*d+u,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}var i=r;n.mul=i;var u=o;n.sub=u},{"./common.js":21}],25:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new g.ARRAY_TYPE(9);g.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0);return t[0]=1,t[4]=1,t[8]=1,t},n.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},n.clone=function(t){var e=new g.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},n.fromValues=function(t,e,n,r,o,i,a,s,u){var c=new g.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=o,c[5]=i,c[6]=a,c[7]=s,c[8]=u,c},n.set=function(t,e,n,r,o,i,a,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},n.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8],l=h*a-s*c,f=-h*i+s*u,p=c*i-a*u,d=n*l+r*f+o*p;return d?(d=1/d,t[0]=l*d,t[1]=(-h*r+o*c)*d,t[2]=(s*r-o*a)*d,t[3]=f*d,t[4]=(h*n-o*u)*d,t[5]=(-s*n+o*i)*d,t[6]=p*d,t[7]=(-c*n+r*u)*d,t[8]=(a*n-r*i)*d,t):null},n.adjoint=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8];return t[0]=a*h-s*c,t[1]=o*c-r*h,t[2]=r*s-o*a,t[3]=s*u-i*h,t[4]=n*h-o*u,t[5]=o*i-n*s,t[6]=i*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*i,t},n.determinant=function(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*i-a*u)+n*(-c*o+a*s)+r*(u*o-i*s)},n.multiply=r,n.translate=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],l=e[8],f=n[0],p=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=s,t[5]=u,t[6]=f*r+p*a+c,t[7]=f*o+p*s+h,t[8]=f*i+p*u+l,t},n.rotate=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],l=e[8],f=Math.sin(n),p=Math.cos(n);return t[0]=p*r+f*a,t[1]=p*o+f*s,t[2]=p*i+f*u,t[3]=p*a-f*r,t[4]=p*s-f*o,t[5]=p*u-f*i,t[6]=c,t[7]=h,t[8]=l,t},n.scale=function(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},n.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},n.fromQuat=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,s=r+r,u=o+o,c=n*a,h=r*a,l=r*s,f=o*a,p=o*s,d=o*u,m=i*a,v=i*s,y=i*u;return t[0]=1-l-d,t[3]=h-y,t[6]=f+v,t[1]=h+y,t[4]=1-c-d,t[7]=p-m,t[2]=f-v,t[5]=p+m,t[8]=1-c-l,t},n.normalFromMat4=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8],l=e[9],f=e[10],p=e[11],d=e[12],m=e[13],v=e[14],y=e[15],b=n*s-r*a,M=n*u-o*a,g=n*c-i*a,w=r*u-o*s,P=r*c-i*s,x=o*c-i*u,O=h*m-l*d,S=h*v-f*d,_=h*y-p*d,E=l*v-f*m,A=l*y-p*m,j=f*y-p*v,L=b*j-M*A+g*E+w*_-P*S+x*O;return L?(L=1/L,t[0]=(s*j-u*A+c*E)*L,t[1]=(u*_-a*j-c*S)*L,t[2]=(a*A-s*_+c*O)*L,t[3]=(o*A-r*j-i*E)*L,t[4]=(n*j-o*_+i*S)*L,t[5]=(r*_-n*A-i*O)*L,t[6]=(m*x-v*P+y*w)*L,t[7]=(v*g-d*x-y*M)*L,t[8]=(d*P-m*g+y*b)*L,t):null},n.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},n.subtract=o,n.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},n.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=t[8],l=e[0],f=e[1],p=e[2],d=e[3],m=e[4],v=e[5],y=e[6],b=e[7],M=e[8];return Math.abs(n-l)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-f)<=g.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-p)<=g.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(i-d)<=g.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-m)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-v)<=g.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-y)<=g.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-b)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(h-M)<=g.EPSILON*Math.max(1,Math.abs(h),Math.abs(M))},n.sub=n.mul=void 0;var g=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],l=e[8],f=n[0],p=n[1],d=n[2],m=n[3],v=n[4],y=n[5],b=n[6],M=n[7],g=n[8];return t[0]=f*r+p*a+d*c,t[1]=f*o+p*s+d*h,t[2]=f*i+p*u+d*l,t[3]=m*r+v*a+y*c,t[4]=m*o+v*s+y*h,t[5]=m*i+v*u+y*l,t[6]=b*r+M*a+g*c,t[7]=b*o+M*s+g*h,t[8]=b*i+M*u+g*l,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}var i=r;n.mul=i;var u=o;n.sub=u},{"./common.js":21}],26:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new N.ARRAY_TYPE(16);N.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},n.clone=function(t){var e=new N.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.fromValues=function(t,e,n,r,o,i,a,s,u,c,h,l,f,p,d,m){var v=new N.ARRAY_TYPE(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=o,v[5]=i,v[6]=a,v[7]=s,v[8]=u,v[9]=c,v[10]=h,v[11]=l,v[12]=f,v[13]=p,v[14]=d,v[15]=m,v},n.set=function(t,e,n,r,o,i,a,s,u,c,h,l,f,p,d,m,v){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=h,t[10]=l,t[11]=f,t[12]=p,t[13]=d,t[14]=m,t[15]=v,t},n.identity=x,n.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],i=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=o,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},n.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8],l=e[9],f=e[10],p=e[11],d=e[12],m=e[13],v=e[14],y=e[15],b=n*s-r*a,M=n*u-o*a,g=n*c-i*a,w=r*u-o*s,P=r*c-i*s,x=o*c-i*u,O=h*m-l*d,S=h*v-f*d,_=h*y-p*d,E=l*v-f*m,A=l*y-p*m,j=f*y-p*v,L=b*j-M*A+g*E+w*_-P*S+x*O;return L?(L=1/L,t[0]=(s*j-u*A+c*E)*L,t[1]=(o*A-r*j-i*E)*L,t[2]=(m*x-v*P+y*w)*L,t[3]=(f*P-l*x-p*w)*L,t[4]=(u*_-a*j-c*S)*L,t[5]=(n*j-o*_+i*S)*L,t[6]=(v*g-d*x-y*M)*L,t[7]=(h*x-f*g+p*M)*L,t[8]=(a*A-s*_+c*O)*L,t[9]=(r*_-n*A-i*O)*L,t[10]=(d*P-m*g+y*b)*L,t[11]=(l*g-h*P-p*b)*L,t[12]=(s*S-a*E-u*O)*L,t[13]=(n*E-r*S+o*O)*L,t[14]=(m*M-d*w-v*b)*L,t[15]=(h*w-l*M+f*b)*L,t):null},n.adjoint=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8],l=e[9],f=e[10],p=e[11],d=e[12],m=e[13],v=e[14],y=e[15];return t[0]=s*(f*y-p*v)-l*(u*y-c*v)+m*(u*p-c*f),t[1]=-(r*(f*y-p*v)-l*(o*y-i*v)+m*(o*p-i*f)),t[2]=r*(u*y-c*v)-s*(o*y-i*v)+m*(o*c-i*u),t[3]=-(r*(u*p-c*f)-s*(o*p-i*f)+l*(o*c-i*u)),t[4]=-(a*(f*y-p*v)-h*(u*y-c*v)+d*(u*p-c*f)),t[5]=n*(f*y-p*v)-h*(o*y-i*v)+d*(o*p-i*f),t[6]=-(n*(u*y-c*v)-a*(o*y-i*v)+d*(o*c-i*u)),t[7]=n*(u*p-c*f)-a*(o*p-i*f)+h*(o*c-i*u),t[8]=a*(l*y-p*m)-h*(s*y-c*m)+d*(s*p-c*l),t[9]=-(n*(l*y-p*m)-h*(r*y-i*m)+d*(r*p-i*l)),t[10]=n*(s*y-c*m)-a*(r*y-i*m)+d*(r*c-i*s),t[11]=-(n*(s*p-c*l)-a*(r*p-i*l)+h*(r*c-i*s)),t[12]=-(a*(l*v-f*m)-h*(s*v-u*m)+d*(s*f-u*l)),t[13]=n*(l*v-f*m)-h*(r*v-o*m)+d*(r*f-o*l),t[14]=-(n*(s*v-u*m)-a*(r*v-o*m)+d*(r*u-o*s)),t[15]=n*(s*f-u*l)-a*(r*f-o*l)+h*(r*u-o*s),t},n.determinant=function(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],s=t[6],u=t[7],c=t[8],h=t[9],l=t[10],f=t[11],p=t[12],d=t[13],m=t[14],v=t[15];return(e*a-n*i)*(l*v-f*m)-(e*s-r*i)*(h*v-f*d)+(e*u-o*i)*(h*m-l*d)+(n*s-r*a)*(c*v-f*p)-(n*u-o*a)*(c*m-l*p)+(r*u-o*s)*(c*d-h*p)},n.multiply=r,n.translate=function(t,e,n){var r,o,i,a,s,u,c,h,l,f,p,d,m=n[0],v=n[1],y=n[2];e===t?(t[12]=e[0]*m+e[4]*v+e[8]*y+e[12],t[13]=e[1]*m+e[5]*v+e[9]*y+e[13],t[14]=e[2]*m+e[6]*v+e[10]*y+e[14],t[15]=e[3]*m+e[7]*v+e[11]*y+e[15]):(r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],l=e[8],f=e[9],p=e[10],d=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=h,t[8]=l,t[9]=f,t[10]=p,t[11]=d,t[12]=r*m+s*v+l*y+e[12],t[13]=o*m+u*v+f*y+e[13],t[14]=i*m+c*v+p*y+e[14],t[15]=a*m+h*v+d*y+e[15]);return t},n.scale=function(t,e,n){var r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.rotate=function(t,e,n,r){var o,i,a,s,u,c,h,l,f,p,d,m,v,y,b,M,g,w,P,x,O,S,_,E,A=r[0],j=r[1],L=r[2],R=Math.hypot(A,j,L);if(R<N.EPSILON)return null;A*=R=1/R,j*=R,L*=R,o=Math.sin(n),i=Math.cos(n),a=1-i,s=e[0],u=e[1],c=e[2],h=e[3],l=e[4],f=e[5],p=e[6],d=e[7],m=e[8],v=e[9],y=e[10],b=e[11],M=A*A*a+i,g=j*A*a+L*o,w=L*A*a-j*o,P=A*j*a-L*o,x=j*j*a+i,O=L*j*a+A*o,S=A*L*a+j*o,_=j*L*a-A*o,E=L*L*a+i,t[0]=s*M+l*g+m*w,t[1]=u*M+f*g+v*w,t[2]=c*M+p*g+y*w,t[3]=h*M+d*g+b*w,t[4]=s*P+l*x+m*O,t[5]=u*P+f*x+v*O,t[6]=c*P+p*x+y*O,t[7]=h*P+d*x+b*O,t[8]=s*S+l*_+m*E,t[9]=u*S+f*_+v*E,t[10]=c*S+p*_+y*E,t[11]=h*S+d*_+b*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},n.rotateX=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[4],a=e[5],s=e[6],u=e[7],c=e[8],h=e[9],l=e[10],f=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=i*o+c*r,t[5]=a*o+h*r,t[6]=s*o+l*r,t[7]=u*o+f*r,t[8]=c*o-i*r,t[9]=h*o-a*r,t[10]=l*o-s*r,t[11]=f*o-u*r,t},n.rotateY=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],s=e[2],u=e[3],c=e[8],h=e[9],l=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=i*o-c*r,t[1]=a*o-h*r,t[2]=s*o-l*r,t[3]=u*o-f*r,t[8]=i*r+c*o,t[9]=a*r+h*o,t[10]=s*r+l*o,t[11]=u*r+f*o,t},n.rotateZ=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],s=e[2],u=e[3],c=e[4],h=e[5],l=e[6],f=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=i*o+c*r,t[1]=a*o+h*r,t[2]=s*o+l*r,t[3]=u*o+f*r,t[4]=c*o-i*r,t[5]=h*o-a*r,t[6]=l*o-s*r,t[7]=f*o-u*r,t},n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,e,n){var r,o,i,a=n[0],s=n[1],u=n[2],c=Math.hypot(a,s,u);if(c<N.EPSILON)return null;return a*=c=1/c,s*=c,u*=c,r=Math.sin(e),o=Math.cos(e),i=1-o,t[0]=a*a*i+o,t[1]=s*a*i+u*r,t[2]=u*a*i-s*r,t[3]=0,t[4]=a*s*i-u*r,t[5]=s*s*i+o,t[6]=u*s*i+a*r,t[7]=0,t[8]=a*u*i+s*r,t[9]=s*u*i-a*r,t[10]=u*u*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=f,n.fromQuat2=function(t,e){var n=new N.ARRAY_TYPE(3),r=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],l=r*r+o*o+i*i+a*a;0<l?(n[0]=2*(s*a+h*r+u*i-c*o)/l,n[1]=2*(u*a+h*o+c*r-s*i)/l,n[2]=2*(c*a+h*i+s*o-u*r)/l):(n[0]=2*(s*a+h*r+u*i-c*o),n[1]=2*(u*a+h*o+c*r-s*i),n[2]=2*(c*a+h*i+s*o-u*r));return f(t,e,n),t},n.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},n.getScaling=y,n.getRotation=function(t,e){var n=new N.ARRAY_TYPE(3);y(n,e);var r=1/n[0],o=1/n[1],i=1/n[2],a=e[0]*r,s=e[1]*o,u=e[2]*i,c=e[4]*r,h=e[5]*o,l=e[6]*i,f=e[8]*r,p=e[9]*o,d=e[10]*i,m=a+h+d,v=0;0<m?(v=2*Math.sqrt(1+m),t[3]=.25*v,t[0]=(l-p)/v,t[1]=(f-u)/v,t[2]=(s-c)/v):h<a&&d<a?(v=2*Math.sqrt(1+a-h-d),t[3]=(l-p)/v,t[0]=.25*v,t[1]=(s+c)/v,t[2]=(f+u)/v):d<h?(v=2*Math.sqrt(1+h-a-d),t[3]=(f-u)/v,t[0]=(s+c)/v,t[1]=.25*v,t[2]=(l+p)/v):(v=2*Math.sqrt(1+d-a-h),t[3]=(s-c)/v,t[0]=(f+u)/v,t[1]=(l+p)/v,t[2]=.25*v);return t},n.fromRotationTranslationScale=function(t,e,n,r){var o=e[0],i=e[1],a=e[2],s=e[3],u=o+o,c=i+i,h=a+a,l=o*u,f=o*c,p=o*h,d=i*c,m=i*h,v=a*h,y=s*u,b=s*c,M=s*h,g=r[0],w=r[1],P=r[2];return t[0]=(1-(d+v))*g,t[1]=(f+M)*g,t[2]=(p-b)*g,t[3]=0,t[4]=(f-M)*w,t[5]=(1-(l+v))*w,t[6]=(m+y)*w,t[7]=0,t[8]=(p+b)*P,t[9]=(m-y)*P,t[10]=(1-(l+d))*P,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,e,n,r,o){var i=e[0],a=e[1],s=e[2],u=e[3],c=i+i,h=a+a,l=s+s,f=i*c,p=i*h,d=i*l,m=a*h,v=a*l,y=s*l,b=u*c,M=u*h,g=u*l,w=r[0],P=r[1],x=r[2],O=o[0],S=o[1],_=o[2],E=(1-(m+y))*w,A=(p+g)*w,j=(d-M)*w,L=(p-g)*P,R=(1-(f+y))*P,I=(v+b)*P,q=(d+M)*x,N=(v-b)*x,F=(1-(f+m))*x;return t[0]=E,t[1]=A,t[2]=j,t[3]=0,t[4]=L,t[5]=R,t[6]=I,t[7]=0,t[8]=q,t[9]=N,t[10]=F,t[11]=0,t[12]=n[0]+O-(E*O+L*S+q*_),t[13]=n[1]+S-(A*O+R*S+N*_),t[14]=n[2]+_-(j*O+I*S+F*_),t[15]=1,t},n.fromQuat=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,s=r+r,u=o+o,c=n*a,h=r*a,l=r*s,f=o*a,p=o*s,d=o*u,m=i*a,v=i*s,y=i*u;return t[0]=1-l-d,t[1]=h+y,t[2]=f-v,t[3]=0,t[4]=h-y,t[5]=1-c-d,t[6]=p+m,t[7]=0,t[8]=f+v,t[9]=p-m,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,e,n,r,o,i,a){var s=1/(n-e),u=1/(o-r),c=1/(i-a);return t[0]=2*i*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(o+r)*u,t[10]=(a+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*c,t[15]=0,t},n.perspective=function(t,e,n,r,o){var i,a=1/Math.tan(e/2);t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(r-o),t[10]=(o+r)*i,t[14]=2*o*r*i):(t[10]=-1,t[14]=-2*r);return t},n.perspectiveFromFieldOfView=function(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(o+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(o-i)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},n.ortho=function(t,e,n,r,o,i,a){var s=1/(e-n),u=1/(r-o),c=1/(i-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+r)*u,t[14]=(a+i)*c,t[15]=1,t},n.lookAt=function(t,e,n,r){var o,i,a,s,u,c,h,l,f,p,d=e[0],m=e[1],v=e[2],y=r[0],b=r[1],M=r[2],g=n[0],w=n[1],P=n[2];if(Math.abs(d-g)<N.EPSILON&&Math.abs(m-w)<N.EPSILON&&Math.abs(v-P)<N.EPSILON)return x(t);h=d-g,l=m-w,f=v-P,p=1/Math.hypot(h,l,f),o=b*(f*=p)-M*(l*=p),i=M*(h*=p)-y*f,a=y*l-b*h,(p=Math.hypot(o,i,a))?(o*=p=1/p,i*=p,a*=p):a=i=o=0;s=l*a-f*i,u=f*o-h*a,c=h*i-l*o,(p=Math.hypot(s,u,c))?(s*=p=1/p,u*=p,c*=p):c=u=s=0;return t[0]=o,t[1]=s,t[2]=h,t[3]=0,t[4]=i,t[5]=u,t[6]=l,t[7]=0,t[8]=a,t[9]=c,t[10]=f,t[11]=0,t[12]=-(o*d+i*m+a*v),t[13]=-(s*d+u*m+c*v),t[14]=-(h*d+l*m+f*v),t[15]=1,t},n.targetTo=function(t,e,n,r){var o=e[0],i=e[1],a=e[2],s=r[0],u=r[1],c=r[2],h=o-n[0],l=i-n[1],f=a-n[2],p=h*h+l*l+f*f;0<p&&(p=1/Math.sqrt(p),h*=p,l*=p,f*=p);var d=u*f-c*l,m=c*h-s*f,v=s*l-u*h;0<(p=d*d+m*m+v*v)&&(p=1/Math.sqrt(p),d*=p,m*=p,v*=p);return t[0]=d,t[1]=m,t[2]=v,t[3]=0,t[4]=l*v-f*m,t[5]=f*d-h*v,t[6]=h*m-l*d,t[7]=0,t[8]=h,t[9]=l,t[10]=f,t[11]=0,t[12]=o,t[13]=i,t[14]=a,t[15]=1,t},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},n.subtract=o,n.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},n.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=t[8],l=t[9],f=t[10],p=t[11],d=t[12],m=t[13],v=t[14],y=t[15],b=e[0],M=e[1],g=e[2],w=e[3],P=e[4],x=e[5],O=e[6],S=e[7],_=e[8],E=e[9],A=e[10],j=e[11],L=e[12],R=e[13],I=e[14],q=e[15];return Math.abs(n-b)<=N.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-M)<=N.EPSILON*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(o-g)<=N.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(i-w)<=N.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-P)<=N.EPSILON*Math.max(1,Math.abs(a),Math.abs(P))&&Math.abs(s-x)<=N.EPSILON*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(u-O)<=N.EPSILON*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(c-S)<=N.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(h-_)<=N.EPSILON*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(l-E)<=N.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(f-A)<=N.EPSILON*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(p-j)<=N.EPSILON*Math.max(1,Math.abs(p),Math.abs(j))&&Math.abs(d-L)<=N.EPSILON*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(m-R)<=N.EPSILON*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(v-I)<=N.EPSILON*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(y-q)<=N.EPSILON*Math.max(1,Math.abs(y),Math.abs(q))},n.sub=n.mul=void 0;var N=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function x(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function r(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],l=e[8],f=e[9],p=e[10],d=e[11],m=e[12],v=e[13],y=e[14],b=e[15],M=n[0],g=n[1],w=n[2],P=n[3];return t[0]=M*r+g*s+w*l+P*m,t[1]=M*o+g*u+w*f+P*v,t[2]=M*i+g*c+w*p+P*y,t[3]=M*a+g*h+w*d+P*b,M=n[4],g=n[5],w=n[6],P=n[7],t[4]=M*r+g*s+w*l+P*m,t[5]=M*o+g*u+w*f+P*v,t[6]=M*i+g*c+w*p+P*y,t[7]=M*a+g*h+w*d+P*b,M=n[8],g=n[9],w=n[10],P=n[11],t[8]=M*r+g*s+w*l+P*m,t[9]=M*o+g*u+w*f+P*v,t[10]=M*i+g*c+w*p+P*y,t[11]=M*a+g*h+w*d+P*b,M=n[12],g=n[13],w=n[14],P=n[15],t[12]=M*r+g*s+w*l+P*m,t[13]=M*o+g*u+w*f+P*v,t[14]=M*i+g*c+w*p+P*y,t[15]=M*a+g*h+w*d+P*b,t}function f(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=r+r,u=o+o,c=i+i,h=r*s,l=r*u,f=r*c,p=o*u,d=o*c,m=i*c,v=a*s,y=a*u,b=a*c;return t[0]=1-(p+m),t[1]=l+b,t[2]=f-y,t[3]=0,t[4]=l-b,t[5]=1-(h+m),t[6]=d+v,t[7]=0,t[8]=f+y,t[9]=d-v,t[10]=1-(h+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function y(t,e){var n=e[0],r=e[1],o=e[2],i=e[4],a=e[5],s=e[6],u=e[8],c=e[9],h=e[10];return t[0]=Math.hypot(n,r,o),t[1]=Math.hypot(i,a,s),t[2]=Math.hypot(u,c,h),t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}var i=r;n.mul=i;var u=o;n.sub=u},{"./common.js":21}],27:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=c,n.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},n.setAxisAngle=h,n.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);r>y.EPSILON?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0);return n},n.getAngle=function(t,e){var n=O(t,e);return Math.acos(2*n*n-1)},n.multiply=l,n.rotateX=function(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=o*u+i*s,t[2]=i*u-o*s,t[3]=a*u-r*s,t},n.rotateY=function(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-i*s,t[1]=o*u+a*s,t[2]=i*u+r*s,t[3]=a*u-o*s,t},n.rotateZ=function(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=o*u-r*s,t[2]=i*u+a*s,t[3]=a*u-i*s,t},n.calculateW=function(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t},n.exp=f,n.ln=p,n.pow=function(t,e,n){return p(t,e),x(t,t,n),f(t,t),t},n.slerp=d,n.random=function(t){var e=y.RANDOM(),n=y.RANDOM(),r=y.RANDOM(),o=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t},n.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-o*s,t[3]=i*s,t},n.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},n.fromMat3=m,n.fromEuler=function(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var i=Math.sin(e),a=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),h=Math.cos(r);return t[0]=i*u*h-a*s*c,t[1]=a*s*h+i*u*c,t[2]=a*u*c-i*s*h,t[3]=a*u*h+i*s*c,t},n.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.setAxes=n.sqlerp=n.rotationTo=n.equals=n.exactEquals=n.normalize=n.sqrLen=n.squaredLength=n.len=n.length=n.lerp=n.dot=n.scale=n.mul=n.add=n.set=n.copy=n.fromValues=n.clone=void 0;var y=u(t("./common.js")),r=u(t("./mat3.js")),o=u(t("./vec3.js")),i=u(t("./vec4.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function c(){var t=new y.ARRAY_TYPE(4);return y.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function h(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function l(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],u=n[1],c=n[2],h=n[3];return t[0]=r*h+a*s+o*c-i*u,t[1]=o*h+a*u+i*s-r*c,t[2]=i*h+a*c+r*u-o*s,t[3]=a*h-r*s-o*u-i*c,t}function f(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=Math.sqrt(n*n+r*r+o*o),s=Math.exp(i),u=0<a?s*Math.sin(a)/a:0;return t[0]=n*u,t[1]=r*u,t[2]=o*u,t[3]=s*Math.cos(a),t}function p(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=Math.sqrt(n*n+r*r+o*o),s=0<a?Math.atan2(a,i)/a:0;return t[0]=n*s,t[1]=r*s,t[2]=o*s,t[3]=.5*Math.log(n*n+r*r+o*o+i*i),t}function d(t,e,n,r){var o,i,a,s,u,c=e[0],h=e[1],l=e[2],f=e[3],p=n[0],d=n[1],m=n[2],v=n[3];return(i=c*p+h*d+l*m+f*v)<0&&(i=-i,p=-p,d=-d,m=-m,v=-v),u=1-i>y.EPSILON?(o=Math.acos(i),a=Math.sin(o),s=Math.sin((1-r)*o)/a,Math.sin(r*o)/a):(s=1-r,r),t[0]=s*c+u*p,t[1]=s*h+u*d,t[2]=s*l+u*m,t[3]=s*f+u*v,t}function m(t,e){var n,r=e[0]+e[4]+e[8];if(0<r)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*i+i]-e[3*a+a]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*i+a]-e[3*a+i])*n,t[i]=(e[3*i+o]+e[3*o+i])*n,t[a]=(e[3*a+o]+e[3*o+a])*n}return t}var v=i.clone;n.clone=v;var b=i.fromValues;n.fromValues=b;var M=i.copy;n.copy=M;var g=i.set;n.set=g;var w=i.add;n.add=w;var P=l;n.mul=P;var x=i.scale;n.scale=x;var O=i.dot;n.dot=O;var S=i.lerp;n.lerp=S;var _=i.length,E=n.length=_;n.len=E;var A=i.squaredLength,j=n.squaredLength=A;n.sqrLen=j;var L=i.normalize;n.normalize=L;var R=i.exactEquals;n.exactEquals=R;var I=i.equals;n.equals=I;var q,N,F,T=(q=o.create(),N=o.fromValues(1,0,0),F=o.fromValues(0,1,0),function(t,e,n){var r=o.dot(e,n);return r<-.999999?(o.cross(q,N,e),o.len(q)<1e-6&&o.cross(q,F,e),o.normalize(q,q),h(t,q,Math.PI),t):.999999<r?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(o.cross(q,e,n),t[0]=q[0],t[1]=q[1],t[2]=q[2],t[3]=1+r,L(t,t))});n.rotationTo=T;var k,D,Y=(k=c(),D=c(),function(t,e,n,r,o,i){return d(k,e,o,i),d(D,n,r,i),d(t,k,D,2*i*(1-i)),t});n.sqlerp=Y;var z,V=(z=r.create(),function(t,e,n,r){return z[0]=n[0],z[3]=n[1],z[6]=n[2],z[1]=r[0],z[4]=r[1],z[7]=r[2],z[2]=-e[0],z[5]=-e[1],z[8]=-e[2],L(t,m(t,z))});n.setAxes=V},{"./common.js":21,"./mat3.js":25,"./vec3.js":30,"./vec4.js":31}],28:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var t=new b.ARRAY_TYPE(8);b.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0);return t[3]=1,t},n.clone=function(t){var e=new b.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},n.fromValues=function(t,e,n,r,o,i,a,s){var u=new b.ARRAY_TYPE(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=o,u[5]=i,u[6]=a,u[7]=s,u},n.fromRotationTranslationValues=function(t,e,n,r,o,i,a){var s=new b.ARRAY_TYPE(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*o,c=.5*i,h=.5*a;return s[4]=u*r+c*n-h*e,s[5]=c*r+h*t-u*n,s[6]=h*r+u*e-c*t,s[7]=-u*t-c*e-h*n,s},n.fromRotationTranslation=i,n.fromTranslation=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},n.fromRotation=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},n.fromMat4=function(t,e){var n=m.create();o.getRotation(n,e);var r=new b.ARRAY_TYPE(3);return o.getTranslation(r,e),i(t,n,r),t},n.copy=M,n.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},n.set=function(t,e,n,r,o,i,a,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t},n.getDual=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},n.setDual=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},n.getTranslation=function(t,e){var n=e[4],r=e[5],o=e[6],i=e[7],a=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+i*a+r*u-o*s),t[1]=2*(r*c+i*s+o*a-n*u),t[2]=2*(o*c+i*u+n*s-r*a),t},n.translate=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],h=e[4],l=e[5],f=e[6],p=e[7];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=a*s+o*c-i*u+h,t[5]=a*u+i*s-r*c+l,t[6]=a*c+r*u-o*s+f,t[7]=-r*s-o*u-i*c+p,t},n.rotateX=function(t,e,n){var r=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],l=s*a+h*r+u*i-c*o,f=u*a+h*o+c*r-s*i,p=c*a+h*i+s*o-u*r,d=h*a-s*r-u*o-c*i;return m.rotateX(t,e,n),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=l*a+d*r+f*i-p*o,t[5]=f*a+d*o+p*r-l*i,t[6]=p*a+d*i+l*o-f*r,t[7]=d*a-l*r-f*o-p*i,t},n.rotateY=function(t,e,n){var r=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],l=s*a+h*r+u*i-c*o,f=u*a+h*o+c*r-s*i,p=c*a+h*i+s*o-u*r,d=h*a-s*r-u*o-c*i;return m.rotateY(t,e,n),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=l*a+d*r+f*i-p*o,t[5]=f*a+d*o+p*r-l*i,t[6]=p*a+d*i+l*o-f*r,t[7]=d*a-l*r-f*o-p*i,t},n.rotateZ=function(t,e,n){var r=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],l=s*a+h*r+u*i-c*o,f=u*a+h*o+c*r-s*i,p=c*a+h*i+s*o-u*r,d=h*a-s*r-u*o-c*i;return m.rotateZ(t,e,n),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=l*a+d*r+f*i-p*o,t[5]=f*a+d*o+p*r-l*i,t[6]=p*a+d*i+l*o-f*r,t[7]=d*a-l*r-f*o-p*i,t},n.rotateByQuatAppend=function(t,e,n){var r=n[0],o=n[1],i=n[2],a=n[3],s=e[0],u=e[1],c=e[2],h=e[3];return t[0]=s*a+h*r+u*i-c*o,t[1]=u*a+h*o+c*r-s*i,t[2]=c*a+h*i+s*o-u*r,t[3]=h*a-s*r-u*o-c*i,s=e[4],u=e[5],c=e[6],h=e[7],t[4]=s*a+h*r+u*i-c*o,t[5]=u*a+h*o+c*r-s*i,t[6]=c*a+h*i+s*o-u*r,t[7]=h*a-s*r-u*o-c*i,t},n.rotateByQuatPrepend=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],u=n[1],c=n[2],h=n[3];return t[0]=r*h+a*s+o*c-i*u,t[1]=o*h+a*u+i*s-r*c,t[2]=i*h+a*c+r*u-o*s,t[3]=a*h-r*s-o*u-i*c,s=n[4],u=n[5],c=n[6],h=n[7],t[4]=r*h+a*s+o*c-i*u,t[5]=o*h+a*u+i*s-r*c,t[6]=i*h+a*c+r*u-o*s,t[7]=a*h-r*s-o*u-i*c,t},n.rotateAroundAxis=function(t,e,n,r){if(Math.abs(r)<b.EPSILON)return M(t,e);var o=Math.hypot(n[0],n[1],n[2]);r*=.5;var i=Math.sin(r),a=i*n[0]/o,s=i*n[1]/o,u=i*n[2]/o,c=Math.cos(r),h=e[0],l=e[1],f=e[2],p=e[3];t[0]=h*c+p*a+l*u-f*s,t[1]=l*c+p*s+f*a-h*u,t[2]=f*c+p*u+h*s-l*a,t[3]=p*c-h*a-l*s-f*u;var d=e[4],m=e[5],v=e[6],y=e[7];return t[4]=d*c+y*a+m*u-v*s,t[5]=m*c+y*s+v*a-d*u,t[6]=v*c+y*u+d*s-m*a,t[7]=y*c-d*a-m*s-v*u,t},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t},n.multiply=h,n.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t},n.lerp=function(t,e,n,r){var o=1-r;f(e,n)<0&&(r=-r);return t[0]=e[0]*o+n[0]*r,t[1]=e[1]*o+n[1]*r,t[2]=e[2]*o+n[2]*r,t[3]=e[3]*o+n[3]*r,t[4]=e[4]*o+n[4]*r,t[5]=e[5]*o+n[5]*r,t[6]=e[6]*o+n[6]*r,t[7]=e[7]*o+n[7]*r,t},n.invert=function(t,e){var n=v(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t},n.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},n.normalize=function(t,e){var n=v(e);if(0<n){n=Math.sqrt(n);var r=e[0]/n,o=e[1]/n,i=e[2]/n,a=e[3]/n,s=e[4],u=e[5],c=e[6],h=e[7],l=r*s+o*u+i*c+a*h;t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=(s-r*l)/n,t[5]=(u-o*l)/n,t[6]=(c-i*l)/n,t[7]=(h-a*l)/n}return t},n.str=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=e[0],l=e[1],f=e[2],p=e[3],d=e[4],m=e[5],v=e[6],y=e[7];return Math.abs(n-h)<=b.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-l)<=b.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-f)<=b.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-p)<=b.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-d)<=b.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-m)<=b.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-v)<=b.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-y)<=b.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))},n.sqrLen=n.squaredLength=n.len=n.length=n.dot=n.mul=n.setReal=n.getReal=void 0;var b=r(t("./common.js")),m=r(t("./quat.js")),o=r(t("./mat4.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function i(t,e,n){var r=.5*n[0],o=.5*n[1],i=.5*n[2],a=e[0],s=e[1],u=e[2],c=e[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+o*u-i*s,t[5]=o*c+i*a-r*u,t[6]=i*c+r*s-o*a,t[7]=-r*a-o*s-i*u,t}function M(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}var u=m.copy;n.getReal=u;var c=m.copy;function h(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[4],u=n[5],c=n[6],h=n[7],l=e[4],f=e[5],p=e[6],d=e[7],m=n[0],v=n[1],y=n[2],b=n[3];return t[0]=r*b+a*m+o*y-i*v,t[1]=o*b+a*v+i*m-r*y,t[2]=i*b+a*y+r*v-o*m,t[3]=a*b-r*m-o*v-i*y,t[4]=r*h+a*s+o*c-i*u+l*b+d*m+f*y-p*v,t[5]=o*h+a*u+i*s-r*c+f*b+d*v+p*m-l*y,t[6]=i*h+a*c+r*u-o*s+p*b+d*y+l*v-f*m,t[7]=a*h-r*s-o*u-i*c+d*b-l*m-f*v-p*y,t}n.setReal=c;var l=h;n.mul=l;var f=m.dot;n.dot=f;var p=m.length,d=n.length=p;n.len=d;var v=m.squaredLength,y=n.squaredLength=v;n.sqrLen=y},{"./common.js":21,"./mat4.js":26,"./quat.js":27}],29:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){var e=new s.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},n.fromValues=function(t,e){var n=new s.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},n.set=function(t,e,n){return t[0]=e,t[1]=n,t},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},n.subtract=o,n.multiply=i,n.divide=c,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},n.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},n.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},n.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},n.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},n.distance=h,n.squaredDistance=l,n.length=f,n.squaredLength=p,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},n.normalize=function(t,e){var n=e[0],r=e[1],o=n*n+r*r;0<o&&(o=1/Math.sqrt(o));return t[0]=e[0]*o,t[1]=e[1]*o,t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},n.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},n.lerp=function(t,e,n,r){var o=e[0],i=e[1];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t},n.random=function(t,e){e=e||1;var n=2*s.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},n.transformMat2=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t},n.transformMat2d=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t},n.transformMat3=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t},n.transformMat4=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t},n.rotate=function(t,e,n,r){var o=e[0]-n[0],i=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=o*s-i*a+n[0],t[1]=o*a+i*s+n[1],t},n.angle=function(t,e){var n=t[0],r=t[1],o=e[0],i=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(o*o+i*i),s=a&&(n*o+r*i)/a;return Math.acos(Math.min(Math.max(s,-1),1))},n.zero=function(t){return t[0]=0,t[1]=0,t},n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},n.equals=function(t,e){var n=t[0],r=t[1],o=e[0],i=e[1];return Math.abs(n-o)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-i)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))},n.forEach=n.sqrLen=n.sqrDist=n.dist=n.div=n.mul=n.sub=n.len=void 0;var s=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function r(){var t=new s.ARRAY_TYPE(2);return s.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function i(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function c(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function h(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function f(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function p(t){var e=t[0],n=t[1];return e*e+n*n}var d=f;n.len=d;var m=o;n.sub=m;var v=i;n.mul=v;var y=c;n.div=y;var b=h;n.dist=b;var M=l;n.sqrDist=M;var g=p;n.sqrLen=g;var w,P=(w=r(),function(t,e,n,r,o,i){var a,s;for(e=e||2,n=n||0,s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)w[0]=t[a],w[1]=t[a+1],o(w,w,i),t[a]=w[0],t[a+1]=w[1];return t});n.forEach=P},{"./common.js":21}],30:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){var e=new u.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},n.length=o,n.fromValues=function(t,e,n){var r=new u.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},n.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},n.subtract=i,n.multiply=c,n.divide=h,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},n.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},n.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},n.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},n.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},n.distance=l,n.squaredDistance=f,n.squaredLength=p,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},n.normalize=function(t,e){var n=e[0],r=e[1],o=e[2],i=n*n+r*r+o*o;0<i&&(i=1/Math.sqrt(i));return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},n.dot=d,n.cross=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],s=n[1],u=n[2];return t[0]=o*u-i*s,t[1]=i*a-r*u,t[2]=r*s-o*a,t},n.lerp=function(t,e,n,r){var o=e[0],i=e[1],a=e[2];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t},n.hermite=function(t,e,n,r,o,i){var a=i*i,s=a*(2*i-3)+1,u=a*(i-2)+i,c=a*(i-1),h=a*(3-2*i);return t[0]=e[0]*s+n[0]*u+r[0]*c+o[0]*h,t[1]=e[1]*s+n[1]*u+r[1]*c+o[1]*h,t[2]=e[2]*s+n[2]*u+r[2]*c+o[2]*h,t},n.bezier=function(t,e,n,r,o,i){var a=1-i,s=a*a,u=i*i,c=s*a,h=3*i*s,l=3*u*a,f=u*i;return t[0]=e[0]*c+n[0]*h+r[0]*l+o[0]*f,t[1]=e[1]*c+n[1]*h+r[1]*l+o[1]*f,t[2]=e[2]*c+n[2]*h+r[2]*l+o[2]*f,t},n.random=function(t,e){e=e||1;var n=2*u.RANDOM()*Math.PI,r=2*u.RANDOM()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t},n.transformMat4=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,t[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,t[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,t},n.transformMat3=function(t,e,n){var r=e[0],o=e[1],i=e[2];return t[0]=r*n[0]+o*n[3]+i*n[6],t[1]=r*n[1]+o*n[4]+i*n[7],t[2]=r*n[2]+o*n[5]+i*n[8],t},n.transformQuat=function(t,e,n){var r=n[0],o=n[1],i=n[2],a=n[3],s=e[0],u=e[1],c=e[2],h=o*c-i*u,l=i*s-r*c,f=r*u-o*s,p=o*f-i*l,d=i*h-r*f,m=r*l-o*h,v=2*a;return h*=v,l*=v,f*=v,p*=2,d*=2,m*=2,t[0]=s+h+p,t[1]=u+l+d,t[2]=c+f+m,t},n.rotateX=function(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},n.rotateY=function(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},n.rotateZ=function(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},n.angle=function(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],s=e[2],u=Math.sqrt(n*n+r*r+o*o),c=Math.sqrt(i*i+a*a+s*s),h=u*c,l=h&&d(t,e)/h;return Math.acos(Math.min(Math.max(l,-1),1))},n.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],s=e[2];return Math.abs(n-i)<=u.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=u.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-s)<=u.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))},n.forEach=n.sqrLen=n.len=n.sqrDist=n.dist=n.div=n.mul=n.sub=void 0;var u=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(){var t=new u.ARRAY_TYPE(3);return u.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function c(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function h(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.hypot(n,r,o)}function f(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function p(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}var m=i;n.sub=m;var v=c;n.mul=v;var y=h;n.div=y;var b=l;n.dist=b;var M=f;n.sqrDist=M;var g=o;n.len=g;var w=p;n.sqrLen=w;var P,x=(P=r(),function(t,e,n,r,o,i){var a,s;for(e=e||3,n=n||0,s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)P[0]=t[a],P[1]=t[a+1],P[2]=t[a+2],o(P,P,i),t[a]=P[0],t[a+1]=P[1],t[a+2]=P[2];return t});n.forEach=x},{"./common.js":21}],31:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(t){var e=new h.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.fromValues=function(t,e,n,r){var o=new h.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.set=function(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t},n.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},n.subtract=o,n.multiply=i,n.divide=u,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},n.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},n.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},n.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},n.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},n.distance=c,n.squaredDistance=l,n.length=f,n.squaredLength=p,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},n.normalize=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i;0<a&&(a=1/Math.sqrt(a));return t[0]=n*a,t[1]=r*a,t[2]=o*a,t[3]=i*a,t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},n.cross=function(t,e,n,r){var o=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],h=e[0],l=e[1],f=e[2],p=e[3];return t[0]=l*c-f*u+p*s,t[1]=-h*c+f*a-p*i,t[2]=h*u-l*a+p*o,t[3]=-h*s+l*i-f*o,t},n.lerp=function(t,e,n,r){var o=e[0],i=e[1],a=e[2],s=e[3];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t},n.random=function(t,e){var n,r,o,i,a,s;e=e||1;for(;n=2*h.RANDOM()-1,r=2*h.RANDOM()-1,a=n*n+r*r,1<=a;);for(;o=2*h.RANDOM()-1,i=2*h.RANDOM()-1,s=o*o+i*i,1<=s;);var u=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*o*u,t[3]=e*i*u,t},n.transformMat4=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,t[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,t[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,t[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,t},n.transformQuat=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],s=n[1],u=n[2],c=n[3],h=c*r+s*i-u*o,l=c*o+u*r-a*i,f=c*i+a*o-s*r,p=-a*r-s*o-u*i;return t[0]=h*c+p*-a+l*-u-f*-s,t[1]=l*c+p*-s+f*-a-h*-u,t[2]=f*c+p*-u+h*-s-l*-a,t[3]=e[3],t},n.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=h.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-c)<=h.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},n.forEach=n.sqrLen=n.len=n.sqrDist=n.dist=n.div=n.mul=n.sub=void 0;var h=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(){var t=new h.ARRAY_TYPE(4);return h.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function i(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function u(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return Math.hypot(n,r,o,i)}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+o*o+i*i}function f(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.hypot(e,n,r,o)}function p(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}var d=o;n.sub=d;var m=i;n.mul=m;var v=u;n.div=v;var y=c;n.dist=y;var b=l;n.sqrDist=b;var M=f;n.len=M;var g=p;n.sqrLen=g;var w,P=(w=r(),function(t,e,n,r,o,i){var a,s;for(e=e||4,n=n||0,s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)w[0]=t[a],w[1]=t[a+1],w[2]=t[a+2],w[3]=t[a+3],o(w,w,i),t[a]=w[0],t[a+1]=w[1],t[a+2]=w[2],t[a+3]=w[3];return t});n.forEach=P},{"./common.js":21}],32:[function(t,e,n){var r,o,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(t){o=s}}();var c,h=[],l=!1,f=-1;function p(){l&&c&&(l=!1,c.length?h=c.concat(h):f=-1,h.length&&d())}function d(){if(!l){var t=u(p);l=!0;for(var e=h.length;e;){for(c=h,h=[];++f<e;)c&&c[f].run();f=-1,e=h.length}c=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new m(t,e)),1!==h.length||l||u(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],33:[function(t,e,n){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],34:[function(t,e,n){"undefined"!=typeof window&&"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)}),Leap=t("../lib/index")},{"../lib/index":11}]},{},[34]);